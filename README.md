# üöÄ LxGen ‚Äî –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä SoC –Ω–∞ –±–∞–∑–µ LiteX

**LxGen** ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ **—Å–∏—Å—Ç–µ–º –Ω–∞ –∫—Ä–∏—Å—Ç–∞–ª–ª–µ (SoC)** –Ω–∞ –±–∞–∑–µ [LiteX](https://github.com/enjoy-digital/litex).

–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –∫–∞—Å—Ç–æ–º–Ω—ã–π SoC –≤—Å–µ–≥–æ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç, –æ–ø–∏—Å–∞–≤ –µ–≥–æ –≤ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ TOML. LxGen —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —á–∏—Ç–∞–µ–º—ã–π Python-–∫–æ–¥ –ø–æ–¥ LiteX, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –º–æ–∂–µ—Ç–µ —Å—Ä–∞–∑—É —Å–æ–±—Ä–∞—Ç—å, –ø—Ä–æ—à–∏—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

---

## üéØ –ß—Ç–æ —É–º–µ–µ—Ç LxGen?

* üì¶ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Python-–ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ LiteX –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
* ‚öôÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—ã–±–æ—Ä–∞ CPU-—è–¥—Ä–∞ (VexRiscv, PicoRV32 –∏ –¥—Ä.)
* üß† –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∏ –≤–Ω–µ—à–Ω–µ–π –ø–∞–º—è—Ç–∏ (SRAM, SDRAM –∏ –¥—Ä.)
* üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤: UART, SPI, I2C, GPIO –∏ —Ç.–¥.
* üí° –ß–∏—Ç–∞–µ–º—ã–π –∏ —É–¥–æ–±–Ω—ã–π –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–æ–¥
* üîÅ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã **Sipeed Tang Primer 20K** (–≤ –±—É–¥—É—â–µ–º ‚Äî –±–æ–ª—å—à–µ!)

---

## üß† –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

1. –í—ã —Å–æ–∑–¥–∞—ë—Ç–µ `.toml` —Ñ–∞–π–ª —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã.
2. LxGen –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç Python-–ø—Ä–æ–µ–∫—Ç –Ω–∞ LiteX –ø–æ–¥ —É–∫–∞–∑–∞–Ω–Ω—É—é –ø–ª–∞—Ç—É.
3. –í—ã –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –≤ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ —Å–±–æ—Ä–∫—É (`make all`).

üí° –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–Ω–∏–º–∞–µ—Ç –±—É–∫–≤–∞–ª—å–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≥–ª—É–±–æ–∫–∏—Ö –∑–Ω–∞–Ω–∏–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç–µ–π LiteX.

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

* Python 3.8+
* LiteX (—Å–º. [—É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–¥–µ—Å—å](https://github.com/enjoy-digital/litex))
* `yosys`, `nextpnr`, `make` (–¥–ª—è —Å–±–æ—Ä–∫–∏ –Ω–∞ Lattice)
* –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø—Ä–æ—à–∏–≤–æ—á–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (`openFPGALoader`, `dfu-util` –∏ –¥—Ä.)

---

### 2. –ü—Ä–∏–º–µ—Ä —Å–∫—Ä–∏–ø—Ç–∞ –∑–∞–ø—É—Å–∫–∞

```python
# main.py
if __name__ == "__main__":
    import sys
    from LxGen import LxGen

    if len(sys.argv) < 2:
        print("Usage: python3 main.py <config_file>")
        sys.exit(1)

    lg = LxGen.LxGen(sys.argv[1])
    lg.generate()
```

---

### 3. –ü—Ä–∏–º–µ—Ä TOML-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```toml
board = "sipeed_tang_primer_20k"
project = "test"

cpu = "vexriscv"
sram_size = 4096

interfaces = [
    { type = "clk", name = "clk27", io = "LVCMOS33", pins = { clk27 = "H11" } },
    { type = "uart", name = "serial0", io = "LVCMOS33", pins = { rx = "A11", tx = "B11" } },
    { type = "spi", name = "spi0", io = "LVCMOS33", pins = {
        cs_n = "P8",
        clk  = "T8",
        mosi = "F9",
        miso = "T9"
    } }
]
```

---

### 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
python3 main.py board.toml
cd test
make all
```

–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ LxGen —Å–æ–∑–¥–∞—ë—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `test` (–ø–æ –∏–º–µ–Ω–∏ –ø—Ä–æ–µ–∫—Ç–∞), —Å–æ–¥–µ—Ä–∂–∞—â—É—é –ø–æ–ª–Ω—ã–π LiteX-–ø—Ä–æ–µ–∫—Ç. –î–∞–ª–µ–µ –º–æ–∂–Ω–æ –ø—Ä–æ—à–∏–≤–∞—Ç—å FPGA —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏.

---

## üìå –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ TOML-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

* `board` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
* `project` ‚Äî –∏–º—è —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
* `cpu` ‚Äî –≤—ã–±—Ä–∞–Ω–Ω–æ–µ —è–¥—Ä–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `vexriscv`, `picorv32`, `lm32`)
* `sram_size` ‚Äî —Ä–∞–∑–º–µ—Ä –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏ (–≤ –±–∞–π—Ç–∞—Ö)
* `interfaces` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–∏–Ω–æ–≤

---

## üõ† –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

| –ü–ª–∞—Ç–∞                     | –°—Ç–∞—Ç—É—Å           |
| ------------------------- | ---------------- |
| Sipeed Tang Primer 20K    | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| Sipeed Tang nano 9k       | üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  |
| –î—Ä—É–≥–∏–µ –¥–æ—Å–∫–∏ :—ä           | üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  |

–•–æ—á–µ—à—å —É–≤–∏–¥–µ—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–≤–æ–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã? –°–æ–∑–¥–∞–π issue –∏–ª–∏ pull request!

---

## üí¨ –ü–æ—á–µ–º—É —Å—Ç–æ–∏—Ç –≤—ã–±—Ä–∞—Ç—å LxGen?

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å                  | –ï—Å—Ç—å –≤ LxGen  |
| ---------------------------- | ------------  |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è SoC | ‚úÖ            |
| –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç TOML    | ‚úÖ            |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö CPU         | ‚úÖ            |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞–º—è—Ç–∏             | ‚úÖ            |
| –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å                | ‚úÖ            |
| –û—Ç–∫—Ä—ã—Ç—ã–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥        | ‚úÖ            |

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

* –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —Å UART –∏ GPIO –∑–∞ 2 –º–∏–Ω—É—Ç—ã
* –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ SPI —Å –≤–Ω–µ—à–Ω–∏–º–∏ —á–∏–ø–∞–º–∏
* –ë—ã—Å—Ç—Ä–æ–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –ø–æ–¥ –∫–∞—Å—Ç–æ–º–Ω–æ–µ —è–¥—Ä–æ
* –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã —Å LiteX –±–µ–∑ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è –≤ Python



